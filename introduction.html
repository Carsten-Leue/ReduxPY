

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>What is Redux and Why &mdash; ReduxPy r1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="redux package" href="redux.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> ReduxPy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Modules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">redux</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional information:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">What is Redux and Why</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-state-tree">The State Tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="#actions">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reducers">Reducers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#epics">Epics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#feature-module">Feature Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#providing-a-feature-module">Providing a feature module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#registering-a-feature-module">Registering a feature module</a></li>
<li class="toctree-l1"><a class="reference internal" href="#consuming-a-feature-module">Consuming a feature module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#side-effects-in-feature-modules">Side effects in Feature Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">Example</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ReduxPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>What is Redux and Why</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>Implementation of a Redux store with support for adding feature modules,
dynamically. The store exposes a reactive API based on
<a class="reference external" href="https://pypi.org/project/Rx/">RxPY</a>.</p>
<div class="section" id="what-is-redux-and-why">
<h1>What is Redux and Why<a class="headerlink" href="#what-is-redux-and-why" title="Permalink to this headline">¶</a></h1>
<p>Complex applications - client or server - often need to maintain state
and the more complex the application becomes the harder it is to keep
track of that state. The Redux pattern addresses the management of
complex state by following the ideas of
<a class="reference external" href="http://facebook.github.io/flux/">Flux</a>,
<a class="reference external" href="https://martinfowler.com/bliki/CQRS.html">CQRS</a>, and <a class="reference external" href="https://martinfowler.com/eaaDev/EventSourcing.html">Event
Sourcing</a>.</p>
<p>The <a class="reference external" href="https://redux.js.org/introduction/three-principles">basic
principle</a> boils
down to:</p>
<ul class="simple">
<li><p><strong>Single source of truth:</strong> The state of your whole application is
stored in an object tree within a single store.</p></li>
<li><p><strong>State is read-only:</strong> The only way to change the state is to emit
an action, an object describing what happened.</p></li>
<li><p><strong>Changes are made with pure functions:</strong> To specify how the state
tree is transformed by actions, you write pure reducers.</p></li>
</ul>
<div class="section" id="the-state-tree">
<h2>The State Tree<a class="headerlink" href="#the-state-tree" title="Permalink to this headline">¶</a></h2>
<p>All state is kept in a single, read-only dictionary of type
<code class="xref py py-class docutils literal notranslate"><span class="pre">ReduxRootState</span></code>. This state is maintained and managed by the
<a class="reference internal" href="redux.html#redux.ReduxRootStore" title="redux.ReduxRootStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReduxRootStore</span></code></a> object that can be created using the
<a class="reference internal" href="redux.html#redux.create_store" title="redux.create_store"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_store()</span></code></a> method. The store allows to dispatch actions, listen
for state changes and add new features.</p>
</div>
<div class="section" id="actions">
<h2>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h2>
<p>State cannot be changed but we can create new state based on existing
state and an <a class="reference external" href="https://redux.js.org/basics/actions">action</a>. The
action describes how the current state will be transformed.</p>
<p>All state transforms are <strong>synchronous</strong> operations and will be executed
by a reducer.</p>
</div>
<div class="section" id="reducers">
<h2>Reducers<a class="headerlink" href="#reducers" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://redux.js.org/basics/reducers">Reducers</a> are pure functions
that transform a current state object into a new state object given an
action.</p>
</div>
<div class="section" id="epics">
<h2>Epics<a class="headerlink" href="#epics" title="Permalink to this headline">¶</a></h2>
<p>It is a basic redux principle that all operations that compute new state
are executed by synchronous reducers. In order to implement asynchronous
operations we introduce the concept of
<a class="reference external" href="https://redux-observable.js.org/">Epics</a>. An epic transforms an
action into another action or set of actions and this transform may be
executed asynchronously. The resulting actions could in turn give rise
to new actions via an epic or they could be interpreted by a reducer.</p>
<p>We represent an epic as a <a class="reference external" href="https://rxpy.readthedocs.io/en/latest/operators.html">reactive
operator</a> that
transforms an action input sequence (and optionally also a state
sequence) into an action otput sequence.</p>
</div>
<div class="section" id="feature-module">
<h2>Feature Module<a class="headerlink" href="#feature-module" title="Permalink to this headline">¶</a></h2>
<p>There should only be one single redux store instance per application. In
traditional redux this means that the set of reducers and epics must be
known at instantiation time of the store. This makes it hard to compose
the overall application from a set of reusable modules.</p>
<p>We introduce the concept of a feature module, motivated by <a class="reference external" href="https://github.com/microsoft/redux-dynamic-modules">dynamic
modules</a> and
<a class="reference external" href="https://ngrx.io/guide/schematics/feature">feature store</a>.</p>
<p>A feature module defines a unique identifier and optionally a reducer,
epic and dependencies. The identifier is used to scope state in a top
level dictionary and it is possible to add a new feature module to an
existing store at any point in time.</p>
</div>
</div>
<div class="section" id="providing-a-feature-module">
<h1>Providing a feature module<a class="headerlink" href="#providing-a-feature-module" title="Permalink to this headline">¶</a></h1>
<p>Create and export an instance of <a class="reference internal" href="redux.html#redux.ReduxFeatureModule" title="redux.ReduxFeatureModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReduxFeatureModule</span></code></a> for your module.
The module definition consists of:</p>
<ul class="simple">
<li><p>a unique module identifier. This identifier is also used as a
namespace in the redux state</p></li>
<li><p>an optional reducer that operates on that namespace</p></li>
<li><p>an optional epic to handle asynchronous actions</p></li>
<li><p>an optional list of other feature modules this module depends on</p></li>
</ul>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">redux</span> <span class="kn">import</span> <span class="n">create_feature_module</span><span class="p">,</span> <span class="n">ReduxFeatureModule</span>

<span class="n">sample_feature_module</span><span class="p">:</span> <span class="n">ReduxFeatureModule</span> <span class="o">=</span> <span class="n">create_feature_module</span><span class="p">(</span>
    <span class="s1">&#39;SAMPLE_FEATURE&#39;</span><span class="p">,</span> <span class="n">sample_reducer</span><span class="p">,</span> <span class="n">sample_epic</span><span class="p">,</span> <span class="p">[</span><span class="n">dep1</span><span class="p">,</span> <span class="n">dep2</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="registering-a-feature-module">
<h1>Registering a feature module<a class="headerlink" href="#registering-a-feature-module" title="Permalink to this headline">¶</a></h1>
<p>Register the feature module with the root store using the
<a class="reference internal" href="redux.html#redux.ReduxRootStore.add_feature_module" title="redux.ReduxRootStore.add_feature_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_feature_module()</span></code></a> method. This will also register all dependent
modules in topology order.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">redux</span> <span class="kn">import</span> <span class="n">create_store</span><span class="p">,</span> <span class="n">ReduxRootStore</span>

<span class="n">store</span><span class="p">:</span> <span class="n">ReduxRootStore</span> <span class="o">=</span> <span class="n">create_store</span><span class="p">()</span>
<span class="n">store</span><span class="o">.</span><span class="n">add_feature_module</span><span class="p">(</span><span class="n">sampleFeature</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="consuming-a-feature-module">
<h1>Consuming a feature module<a class="headerlink" href="#consuming-a-feature-module" title="Permalink to this headline">¶</a></h1>
<p>Use the <a class="reference internal" href="redux.html#redux.select_feature" title="redux.select_feature"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_feature()</span></code></a> method to create a selector for the desired
feature.</p>
<div class="section" id="id1">
<h2>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">redux</span> <span class="kn">import</span> <span class="n">select_feature</span>

<span class="n">select_sample</span> <span class="o">=</span> <span class="n">select_feature</span><span class="p">(</span><span class="n">sample_feature</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="side-effects-in-feature-modules">
<h1>Side effects in Feature Modules<a class="headerlink" href="#side-effects-in-feature-modules" title="Permalink to this headline">¶</a></h1>
<p>Feature modules may provide side effects, aka epics, for asynchronous
processing. Sometimes such epics require an initialization event to
execute bootstrapping logic. The store sends an initialization event for
this purpose, after a feature module has been initialized. Use the
<a class="reference internal" href="redux.html#redux.of_init_feature" title="redux.of_init_feature"><code class="xref py py-meth docutils literal notranslate"><span class="pre">of_init_feature()</span></code></a> method to subscribe to this event.</p>
<div class="section" id="id2">
<h2>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">redux</span> <span class="kn">import</span> <span class="n">of_init_feature</span><span class="p">,</span> <span class="n">Epic</span>
<span class="kn">from</span> <span class="nn">rx.operators</span> <span class="kn">import</span> <span class="nb">map</span>

<span class="n">initEpic</span><span class="p">:</span> <span class="n">Epic</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">actions_</span><span class="p">,</span> <span class="n">state_</span><span class="p">:</span> <span class="n">actions_</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">of_init_feature</span><span class="p">(</span><span class="n">sample_feature</span><span class="p">),</span> <span class="nb">map</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="redux.html" class="btn btn-neutral float-left" title="redux package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Dr. Carsten Leue

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>